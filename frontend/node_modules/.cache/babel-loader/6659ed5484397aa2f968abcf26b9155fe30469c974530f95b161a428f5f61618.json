{"ast":null,"code":"import React,{useState}from'react';import'./ChatPopup.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ChatPopup(){const[open,setOpen]=useState(false);const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const toggleChat=()=>setOpen(!open);const sendMessage=async()=>{if(!input.trim())return;const userMessage={sender:\"user\",text:input};setMessages([...messages,userMessage]);setInput(\"\");try{const res=await axios.post(\"http://localhost:5000/api/chat\",{message:input});const botMessage={sender:\"bot\",text:res.data.reply};setMessages(prev=>[...prev,botMessage]);}catch(err){const errorMsg={sender:\"bot\",text:\"Erreur de connexion au chatbot.\"};setMessages(prev=>[...prev,errorMsg]);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"chat-toggle\",onClick:toggleChat,children:\"\\uD83D\\uDCAC\"}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Assistant IA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleChat,children:\"\\u2716\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:messages.map((msg,i)=>/*#__PURE__*/_jsx(\"div\",{className:`chat-message ${msg.sender}`,children:msg.text},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Posez votre question...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Envoyer\"})]})]})]});}export default ChatPopup;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatPopup","open","setOpen","messages","setMessages","input","setInput","toggleChat","sendMessage","trim","userMessage","sender","text","res","post","message","botMessage","data","reply","prev","err","errorMsg","children","className","onClick","map","msg","i","type","value","onChange","e","target","placeholder"],"sources":["C:/Users/bolek/OneDrive/Bureau/kinebot/frontend/src/components/ChatPopup.js"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport './ChatPopup.css';\nimport axios from 'axios';\n\nfunction ChatPopup() {\n  const [open, setOpen] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n\n  const toggleChat = () => setOpen(!open);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { sender: \"user\", text: input };\n    setMessages([...messages, userMessage]);\n    setInput(\"\");\n\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/chat\", { message: input });\n      const botMessage = { sender: \"bot\", text: res.data.reply };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      const errorMsg = { sender: \"bot\", text: \"Erreur de connexion au chatbot.\" };\n      setMessages(prev => [...prev, errorMsg]);\n    }\n  };\n\n  return (\n    <>\n      <button className=\"chat-toggle\" onClick={toggleChat}>ðŸ’¬</button>\n      {open && (\n        <div className=\"chat-popup\">\n          <div className=\"chat-header\">\n            <span>Assistant IA</span>\n            <button onClick={toggleChat}>âœ–</button>\n          </div>\n          <div className=\"chat-body\">\n            {messages.map((msg, i) => (\n              <div key={i} className={`chat-message ${msg.sender}`}>\n                {msg.text}\n              </div>\n            ))}\n          </div>\n          <div className=\"chat-footer\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={e => setInput(e.target.value)}\n              placeholder=\"Posez votre question...\"\n            />\n            <button onClick={sendMessage}>Envoyer</button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default ChatPopup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}